---
const baseUrl = import.meta.env.BASE_URL;
const withBase = (path) => `${baseUrl}${path.replace(/^\//, "")}`;
const currentPath = Astro.url.pathname.replace(baseUrl, "/");
const navItems = [
  { label: "Home", href: withBase("/"), match: (path) => path === "/" },
  { label: "Projects", href: withBase("/projects"), match: (path) => path.startsWith("/projects") },
  { label: "Blog", href: withBase("/blog"), match: (path) => path.startsWith("/blog") },
  { label: "About", href: withBase("/about"), match: (path) => path === "/about" },
];
---
<header class="fixed top-0 z-20 flex w-full items-center justify-between border-b-2 border-black bg-white px-6 py-4 md:hidden">
  <div class="font-mono text-sm">$ nav</div>
  <details class="group relative">
    <summary class="pill cursor-pointer list-none">
      <span>menu</span>
      <span class="text-lg">+</span>
    </summary>
    <div class="absolute right-0 mt-3 w-48 rounded-2xl border-2 border-black bg-white p-3 shadow-thick">
      <nav class="flex flex-col gap-2">
        {navItems.map((item) => (
          <a
            class={`nav-link ${item.match(currentPath) ? "active" : ""}`}
            href={item.href}
            aria-current={item.match(currentPath) ? "page" : undefined}
          >
            {item.label}
          </a>
        ))}
      </nav>
    </div>
  </details>
</header>
